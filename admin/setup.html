<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="robots" content="noindex, nofollow">
    <title>Admin Setup - Rose Flower Shop</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body {
            font-family: system-ui, -apple-system, sans-serif;
        }
        .code-block {
            background: #1e293b;
            color: #e2e8f0;
            padding: 1rem;
            border-radius: 0.5rem;
            overflow-x: auto;
            font-family: 'Courier New', monospace;
            font-size: 0.875rem;
        }
    </style>
</head>
<body class="bg-gray-50 min-h-screen p-4 md:p-8">
    <div class="max-w-4xl mx-auto">
        <!-- Header -->
        <div class="bg-white rounded-lg shadow-lg p-6 mb-6">
            <h1 class="text-3xl font-bold text-gray-900 mb-2">üîß Rose Admin Setup</h1>
            <p class="text-gray-600">Configure Supabase credentials for the admin system</p>
        </div>

        <!-- Setup Form -->
        <div class="bg-white rounded-lg shadow-lg p-6 mb-6">
            <h2 class="text-xl font-bold mb-4">Step 1: Enter Supabase Credentials</h2>

            <div class="mb-4">
                <label class="block font-semibold mb-2">Supabase Project URL:</label>
                <input type="text" id="supabase-url"
                       class="w-full border-2 border-gray-300 rounded-lg p-3 font-mono text-sm"
                       placeholder="https://xxxxx.supabase.co">
                <p class="text-sm text-gray-500 mt-1">Found in Supabase Dashboard ‚Üí Settings ‚Üí API</p>
            </div>

            <div class="mb-6">
                <label class="block font-semibold mb-2">Supabase Anon Key:</label>
                <textarea id="supabase-key" rows="3"
                          class="w-full border-2 border-gray-300 rounded-lg p-3 font-mono text-sm"
                          placeholder="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."></textarea>
                <p class="text-sm text-gray-500 mt-1">Found in Supabase Dashboard ‚Üí Settings ‚Üí API ‚Üí Project API keys ‚Üí anon public</p>
            </div>

            <button onclick="generateConfig()"
                    class="bg-rose-600 text-white px-6 py-3 rounded-lg font-semibold hover:bg-rose-700 transition">
                Generate Configuration Files
            </button>
        </div>

        <!-- Output Section -->
        <div id="output" class="hidden">
            <!-- File 1: admin.js -->
            <div class="bg-white rounded-lg shadow-lg p-6 mb-6">
                <div class="flex items-center justify-between mb-4">
                    <h3 class="text-lg font-bold">üìÑ Update: /admin/admin.js</h3>
                    <button onclick="copyToClipboard('admin-js-code')"
                            class="text-sm bg-gray-100 px-4 py-2 rounded hover:bg-gray-200">
                        Copy Code
                    </button>
                </div>
                <p class="text-sm text-gray-600 mb-3">Replace lines 6-7 in <code>/admin/admin.js</code>:</p>
                <pre id="admin-js-code" class="code-block"></pre>
            </div>

            <!-- File 2: gallery-loader.js -->
            <div class="bg-white rounded-lg shadow-lg p-6 mb-6">
                <div class="flex items-center justify-between mb-4">
                    <h3 class="text-lg font-bold">üìÑ Update: /js/gallery-loader.js</h3>
                    <button onclick="copyToClipboard('loader-js-code')"
                            class="text-sm bg-gray-100 px-4 py-2 rounded hover:bg-gray-200">
                        Copy Code
                    </button>
                </div>
                <p class="text-sm text-gray-600 mb-3">Replace lines 5-6 in <code>/js/gallery-loader.js</code>:</p>
                <pre id="loader-js-code" class="code-block"></pre>
            </div>

            <!-- File 3: gallery.html -->
            <div class="bg-white rounded-lg shadow-lg p-6 mb-6">
                <div class="flex items-center justify-between mb-4">
                    <h3 class="text-lg font-bold">üìÑ Update: /gallery.html</h3>
                    <button onclick="copyToClipboard('gallery-html-code')"
                            class="text-sm bg-gray-100 px-4 py-2 rounded hover:bg-gray-200">
                        Copy Code
                    </button>
                </div>
                <p class="text-sm text-gray-600 mb-3">Replace the script tag attributes near the end of <code>/gallery.html</code>:</p>
                <pre id="gallery-html-code" class="code-block"></pre>
            </div>

            <!-- Next Steps -->
            <div class="bg-blue-50 border-2 border-blue-200 rounded-lg p-6">
                <h3 class="text-lg font-bold text-blue-900 mb-3">‚úÖ Next Steps:</h3>
                <ol class="list-decimal list-inside space-y-2 text-blue-900">
                    <li>Copy each code block and update the corresponding files</li>
                    <li>Test locally by opening <code>/admin/index.html</code></li>
                    <li>Upload a test image to verify it works</li>
                    <li>Check that images appear on <code>/gallery.html</code></li>
                    <li>Commit and push to GitHub</li>
                    <li>Access admin at: <code>https://your-site.com/admin/</code></li>
                </ol>
            </div>
        </div>

        <!-- Instructions -->
        <div class="bg-yellow-50 border-2 border-yellow-200 rounded-lg p-6 mt-6">
            <h3 class="text-lg font-bold text-yellow-900 mb-3">‚ö†Ô∏è Important Notes:</h3>
            <ul class="list-disc list-inside space-y-2 text-yellow-900">
                <li>Keep your Supabase credentials secure - don't commit them to public repos if you want extra security</li>
                <li>The anon key is safe to use client-side (it's meant for public access)</li>
                <li>RLS policies protect your database even with public credentials</li>
                <li>Make sure you've run the database migration in Supabase first</li>
                <li>Test everything before sharing with the shop owner</li>
            </ul>
        </div>

        <!-- Help -->
        <div class="bg-white rounded-lg shadow-lg p-6 mt-6">
            <h3 class="text-lg font-bold mb-3">üìö Documentation:</h3>
            <ul class="space-y-2">
                <li>
                    <a href="DEVELOPER-SETUP.md" class="text-rose-600 hover:text-rose-700 font-medium">
                        ‚Üí Developer Setup Guide (English)
                    </a>
                </li>
                <li>
                    <a href="ŒüŒîŒóŒìŒôŒïŒ£-ŒßŒ°ŒóŒ£ŒóŒ£.md" class="text-rose-600 hover:text-rose-700 font-medium">
                        ‚Üí User Guide (Greek - for shop owner)
                    </a>
                </li>
            </ul>
        </div>
    </div>

    <script>
        function generateConfig() {
            const url = document.getElementById('supabase-url').value.trim();
            const key = document.getElementById('supabase-key').value.trim();

            if (!url || !key) {
                alert('Please enter both Supabase URL and Anon Key');
                return;
            }

            // Validate URL format
            if (!url.startsWith('https://') || !url.includes('supabase')) {
                alert('Invalid Supabase URL format. Should be: https://xxxxx.supabase.co');
                return;
            }

            // Generate code snippets
            const adminJs = `const SUPABASE_URL = '${url}';
const SUPABASE_ANON_KEY = '${key}';`;

            const loaderJs = `const SUPABASE_URL = document.currentScript.getAttribute('data-supabase-url') || '${url}';
const SUPABASE_ANON_KEY = document.currentScript.getAttribute('data-supabase-key') || '${key}';`;

            const galleryHtml = `<script src="js/gallery-loader.js"
        data-supabase-url="${url}"
        data-supabase-key="${key}"><\/script>`;

            // Display results
            document.getElementById('admin-js-code').textContent = adminJs;
            document.getElementById('loader-js-code').textContent = loaderJs;
            document.getElementById('gallery-html-code').textContent = galleryHtml;

            document.getElementById('output').classList.remove('hidden');

            // Scroll to results
            document.getElementById('output').scrollIntoView({ behavior: 'smooth' });
        }

        function copyToClipboard(elementId) {
            const text = document.getElementById(elementId).textContent;
            navigator.clipboard.writeText(text).then(() => {
                // Show feedback
                const btn = event.target;
                const originalText = btn.textContent;
                btn.textContent = '‚úì Copied!';
                btn.classList.add('bg-green-100');
                setTimeout(() => {
                    btn.textContent = originalText;
                    btn.classList.remove('bg-green-100');
                }, 2000);
            }).catch(err => {
                alert('Failed to copy. Please copy manually.');
                console.error('Copy failed:', err);
            });
        }
    </script>
</body>
</html>
