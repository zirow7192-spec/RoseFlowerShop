<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="robots" content="noindex, nofollow">
    <title>QR Code Generator - Rose Admin</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/qrcode@1.5.3/build/qrcode.min.js"></script>
    <style>
        body {
            font-family: system-ui, -apple-system, sans-serif;
        }
        @media print {
            .no-print {
                display: none;
            }
            .qr-card {
                break-inside: avoid;
            }
        }
    </style>
</head>
<body class="bg-gray-50 min-h-screen p-4 md:p-8">
    <div class="max-w-4xl mx-auto">
        <!-- Header -->
        <div class="bg-white rounded-lg shadow-lg p-6 mb-6 no-print">
            <h1 class="text-3xl font-bold text-gray-900 mb-2">üì± QR Code Generator</h1>
            <p class="text-gray-600">Create a QR code for easy mobile access to the admin panel</p>
        </div>

        <!-- Input Section -->
        <div class="bg-white rounded-lg shadow-lg p-6 mb-6 no-print">
            <h2 class="text-xl font-bold mb-4">Enter Admin URL:</h2>

            <div class="mb-4">
                <input type="text" id="admin-url"
                       class="w-full border-2 border-gray-300 rounded-lg p-3"
                       placeholder="https://your-site.com/admin/"
                       value="">
                <p class="text-sm text-gray-500 mt-2">
                    Example: <code>https://username.github.io/repository/admin/</code>
                </p>
            </div>

            <button onclick="generateQR()"
                    class="bg-rose-600 text-white px-6 py-3 rounded-lg font-semibold hover:bg-rose-700 transition">
                Generate QR Code
            </button>
        </div>

        <!-- QR Code Display -->
        <div id="qr-output" class="hidden">
            <!-- Printable Card -->
            <div class="bg-white rounded-lg shadow-lg p-8 mb-6 qr-card">
                <div class="text-center">
                    <h2 class="text-2xl font-bold text-gray-900 mb-2">üåπ Rose Admin Access</h2>
                    <p class="text-gray-600 mb-6">Scan with your phone camera</p>

                    <div class="flex justify-center mb-6">
                        <canvas id="qr-canvas" class="border-4 border-gray-200 rounded-lg"></canvas>
                    </div>

                    <div class="bg-gray-50 rounded-lg p-4 mb-6">
                        <p class="text-sm text-gray-600 mb-2">Or visit:</p>
                        <p id="url-display" class="font-mono text-sm text-rose-600 break-all"></p>
                    </div>

                    <div class="border-t pt-6 mt-6">
                        <h3 class="font-bold mb-3">üìã Instructions (ŒüŒ¥Œ∑Œ≥ŒØŒµœÇ):</h3>
                        <ol class="text-left text-sm space-y-2 max-w-md mx-auto">
                            <li><strong>1.</strong> Open camera app on your phone</li>
                            <li><strong>2.</strong> Point at QR code</li>
                            <li><strong>3.</strong> Tap notification to open admin</li>
                            <li><strong>4.</strong> Bookmark the page for easy access</li>
                        </ol>
                    </div>

                    <div class="mt-6 text-sm text-gray-500">
                        <p>Rose Flower Shop Admin System</p>
                        <p>For support, contact your developer</p>
                    </div>
                </div>
            </div>

            <!-- Action Buttons -->
            <div class="flex gap-4 mb-6 no-print">
                <button onclick="printQR()"
                        class="flex-1 bg-blue-600 text-white px-6 py-3 rounded-lg font-semibold hover:bg-blue-700 transition">
                    üñ®Ô∏è Print QR Code
                </button>
                <button onclick="downloadQR()"
                        class="flex-1 bg-green-600 text-white px-6 py-3 rounded-lg font-semibold hover:bg-green-700 transition">
                    üíæ Download Image
                </button>
            </div>

            <!-- Usage Tips -->
            <div class="bg-blue-50 border-2 border-blue-200 rounded-lg p-6 no-print">
                <h3 class="text-lg font-bold text-blue-900 mb-3">üí° Usage Tips:</h3>
                <ul class="list-disc list-inside space-y-2 text-blue-900">
                    <li><strong>Print and Laminate:</strong> Keep a physical copy at the shop</li>
                    <li><strong>Frame It:</strong> Place near the computer for easy reference</li>
                    <li><strong>Business Card:</strong> Print small version on business card</li>
                    <li><strong>Multiple Copies:</strong> Keep one at home, one at shop</li>
                    <li><strong>Share Digitally:</strong> Send image via WhatsApp/Email</li>
                </ul>
            </div>
        </div>

        <!-- Info Card -->
        <div class="bg-yellow-50 border-2 border-yellow-200 rounded-lg p-6 mt-6 no-print">
            <h3 class="text-lg font-bold text-yellow-900 mb-3">‚ÑπÔ∏è About QR Codes:</h3>
            <ul class="list-disc list-inside space-y-2 text-yellow-900">
                <li>Works with any smartphone camera (no app needed)</li>
                <li>Just point and tap - opens admin directly</li>
                <li>No typing needed - perfect for avoiding mistakes</li>
                <li>Can be scanned unlimited times</li>
                <li>Never expires - save it permanently</li>
            </ul>
        </div>

        <!-- Privacy Note -->
        <div class="bg-red-50 border-2 border-red-200 rounded-lg p-6 mt-6 no-print">
            <h3 class="text-lg font-bold text-red-900 mb-3">üîí Security Note:</h3>
            <p class="text-red-900">
                <strong>Keep this QR code private!</strong> Anyone who scans it will be able to access the admin login page.
                They still need the PIN to log in, but don't share this QR code publicly or post it online.
            </p>
        </div>
    </div>

    <script>
        // Auto-fill URL if on GitHub Pages
        document.addEventListener('DOMContentLoaded', () => {
            const currentUrl = window.location.href;
            if (currentUrl.includes('github.io')) {
                const baseUrl = currentUrl.substring(0, currentUrl.lastIndexOf('/admin/')) + '/admin/';
                document.getElementById('admin-url').value = baseUrl;
            }
        });

        function generateQR() {
            const url = document.getElementById('admin-url').value.trim();

            if (!url) {
                alert('Please enter the admin URL');
                return;
            }

            if (!url.startsWith('http://') && !url.startsWith('https://')) {
                alert('URL must start with http:// or https://');
                return;
            }

            // Generate QR code
            const canvas = document.getElementById('qr-canvas');
            QRCode.toCanvas(canvas, url, {
                width: 300,
                margin: 2,
                color: {
                    dark: '#000000',
                    light: '#ffffff'
                },
                errorCorrectionLevel: 'H'
            }, (error) => {
                if (error) {
                    console.error(error);
                    alert('Failed to generate QR code');
                    return;
                }

                // Show output
                document.getElementById('url-display').textContent = url;
                document.getElementById('qr-output').classList.remove('hidden');

                // Scroll to QR code
                document.getElementById('qr-output').scrollIntoView({ behavior: 'smooth' });
            });
        }

        function printQR() {
            window.print();
        }

        function downloadQR() {
            const canvas = document.getElementById('qr-canvas');
            const url = document.getElementById('admin-url').value;

            // Create a larger canvas for download
            const downloadCanvas = document.createElement('canvas');
            const ctx = downloadCanvas.getContext('2d');

            // Set size
            downloadCanvas.width = 800;
            downloadCanvas.height = 1000;

            // White background
            ctx.fillStyle = 'white';
            ctx.fillRect(0, 0, downloadCanvas.width, downloadCanvas.height);

            // Title
            ctx.fillStyle = '#e11d48'; // Rose color
            ctx.font = 'bold 48px Arial';
            ctx.textAlign = 'center';
            ctx.fillText('üåπ Rose Admin', 400, 80);

            // Subtitle
            ctx.fillStyle = '#666';
            ctx.font = '24px Arial';
            ctx.fillText('Scan to access admin panel', 400, 120);

            // Draw QR code (centered)
            const qrSize = 500;
            const qrX = (downloadCanvas.width - qrSize) / 2;
            const qrY = 150;

            // Generate high-res QR
            QRCode.toCanvas(document.createElement('canvas'), url, {
                width: qrSize,
                margin: 2,
                errorCorrectionLevel: 'H'
            }, (error, qrCanvas) => {
                if (error) {
                    alert('Failed to generate download image');
                    return;
                }

                ctx.drawImage(qrCanvas, qrX, qrY, qrSize, qrSize);

                // URL text
                ctx.fillStyle = '#e11d48';
                ctx.font = '18px monospace';
                const maxWidth = 700;
                const lineHeight = 25;
                const words = url.split('/');
                let line = '';
                let y = qrY + qrSize + 50;

                words.forEach((word, i) => {
                    const testLine = line + word + (i < words.length - 1 ? '/' : '');
                    const metrics = ctx.measureText(testLine);

                    if (metrics.width > maxWidth && line !== '') {
                        ctx.fillText(line, 400, y);
                        line = word + (i < words.length - 1 ? '/' : '');
                        y += lineHeight;
                    } else {
                        line = testLine;
                    }
                });
                ctx.fillText(line, 400, y);

                // Instructions
                ctx.fillStyle = '#333';
                ctx.font = '20px Arial';
                y += 60;
                ctx.fillText('1. Open camera on phone', 400, y);
                ctx.fillText('2. Point at QR code', 400, y + 30);
                ctx.fillText('3. Tap to open admin', 400, y + 60);

                // Download
                downloadCanvas.toBlob((blob) => {
                    const link = document.createElement('a');
                    link.download = 'rose-admin-qr-code.png';
                    link.href = URL.createObjectURL(blob);
                    link.click();
                });
            });
        }

        // Allow Enter key to generate
        document.getElementById('admin-url').addEventListener('keypress', (e) => {
            if (e.key === 'Enter') {
                generateQR();
            }
        });
    </script>
</body>
</html>
